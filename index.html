<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latihan Reading Comprehension - 40 Soal</title>
    <style>
        /* Style sama seperti sebelumnya, aku ringkas biar nggak panjang */
        body { font-family: 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg, #e8eaf6, #c5cae9); margin: 0; padding: 0; color: #333; min-height: 100vh; }
        .container { max-width: 900px; margin: 20px auto; padding: 20px; background: white; box-shadow: 0 8px 32px rgba(0,0,0,0.15); border-radius: 16px; }
        h1 { text-align: center; color: #1a237e; }
        /* ... (style lainnya copy dari versi sebelumnya) ... */
        .footer { text-align: center; margin-top: 60px; padding: 20px; color: #555; font-size: 0.95em; border-top: 1px solid #ddd; }
        .footer strong { color: #1a237e; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Latihan Reading Comprehension</h1>
        <p style="text-align:center; color:#555; font-style:italic;">40 Soal Pilihan Ganda | Waktu: 50 Menit</p>

        <!-- Login Page -->
        <div id="login-box" class="login-box active">
            <h2>üîê Masuk untuk Mulai Latihan</h2>
            <input type="text" id="username" placeholder="Username (contoh: siswa)">
            <input type="password" id="password" placeholder="Password (contoh: latihan)">
            <input type="text" id="kode" placeholder="Kode Paket Soal (misal: K98345)" style="text-transform:uppercase;">
            <button onclick="login()">Mulai Latihan</button>
            <p style="text-align:center; color:#666; margin-top:25px;">
                Soal diambil langsung dari GitHub repo kamu!<br>
                Contoh kode: <strong>K98345</strong>
            </p>
        </div>

        <!-- Quiz Area -->
        <div id="quiz-container">
            <div class="timer" id="timer">Waktu Tersisa: 50:00</div>
            <div class="progress"><div class="progress-bar" id="progress"></div></div>
            <div id="loading">Memuat soal dari GitHub... sabar ya bro üòé</div>
            
            <form id="quiz-form"></form>

            <div class="nav-buttons">
                <button id="prev" disabled>‚óÑ Sebelumnya</button>
                <button id="submit" class="submit-btn">Submit Sekarang</button>
                <button id="next">Berikutnya ‚ñ∫</button>
            </div>

            <div id="result"></div>
            <div style="text-align:center; margin-top:30px; display:none;" id="review-btn-container">
                <button class="review-btn" onclick="startReview()">üîç Review Jawaban</button>
            </div>
        </div>

        <!-- Copyright -->
        <div class="footer">
            ¬© 2026 <strong>Denzuka - KimJongUn</strong><br>
            All Rights Reserved. Soal dari <a href="https://github.com/airnetcso/latbakor" target="_blank">GitHub airnetcso/latbakor</a>
        </div>
    </div>

    <script>
        // KONFIGURASI
        const validUsers = { username: "siswa", password: "latihan" };
        
        // Mapping kode paket ‚Üí nama subfolder di repo GitHub (atau langsung file)
        const paketMapping = {
            "K98345": "K98345",  // folder paket/K98345/soala.json atau soal1.json dst
            "D31187": "D31187",
            "Z997621": "Z997621"
        };

        const GITHUB_RAW_BASE = "https://raw.githubusercontent.com/airnetcso/latbakor/main/soal";

        const totalQuestions = 40;
        const timeLimit = 50 * 60;
        let questions = [];
        let userAnswers = [];
        let current = 0;
        let timerInterval;
        let timeLeft = timeLimit;
        let currentPaket = "";
        let currentUsername = "";
        let currentKode = "";
        let isSubmitted = false;
        let isReviewMode = false;

        // ... (fungsi login, startTimer, renderQuestions, showQuestion, submitQuiz, review sama seperti versi sebelumnya)

        async function loadQuestions() {
            questions = [];
            userAnswers = Array(totalQuestions).fill(null);

            // OPSI 1: Satu file array (rekomendasi, mudah maintain)
            try {
                const res = await fetch(`${GITHUB_RAW_BASE}/${currentPaket}/soala.json?t=${Date.now()}`);
                questions = await res.json();
                if (questions.length !== totalQuestions) throw new Error();
            } catch (err) {
                // OPSI 2: Kalau file terpisah soal1.json sampai soal40.json
                for (let i = 1; i <= totalQuestions; i++) {
                    try {
                        const res = await fetch(`${GITHUB_RAW_BASE}/${currentPaket}/soal${i}.json?t=${Date.now()}`);
                        const data = await res.json();
                        questions.push(data);
                    } catch (e) {
                        questions.push({ passage: "Soal tidak ditemukan", question: "Lanjut saja", options: {A:"A",B:"B",C:"C",D:"D"}, correct: "B" });
                    }
                }
            }

            renderQuestions();
            document.getElementById('loading').style.display = 'none';
            showQuestion(0);
        }

        // Sisanya script sama seperti versi sebelumnya (render, review, dll)
        // (Aku nggak paste ulang biar nggak panjang, copy dari versi sebelumnya ya bro)
    </script>
</body>
</html>
