<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Latihan Reading Korea</title>

<style>
body{
  margin:0;
  font-family:'Segoe UI',Arial,sans-serif;
  background:#f5f5f5;
}

/* LOGIN */
#login-page{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:
    linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.6)),
    url('https://raw.githubusercontent.com/airnetcso/eps/main/image/bg1.jpg')
    center/cover no-repeat;
}

.login-container{
  width:90%;
  max-width:380px;
  background:#fff;
  padding:35px;
  border-radius:20px;
  text-align:center;
  box-shadow:0 15px 40px rgba(0,0,0,.4);
}

.login-container h1{color:#1a237e}
.login-container h2{color:#4a148c}
.login-container p{color:#555}

input{
  width:100%;
  padding:14px;
  margin:10px 0;
  border-radius:12px;
  border:2px solid #bbb;
}

button{
  width:100%;
  padding:16px;
  margin-top:10px;
  background:#3f51b5;
  color:#fff;
  border:none;
  border-radius:12px;
  font-weight:bold;
  cursor:pointer;
}

/* QUIZ */
#quiz-page{
  display:none;
  min-height:100vh;
}

.header-fixed{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  background:#fff;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
  z-index:1000;
  padding:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.timer,.submit-top{
  padding:10px 18px;
  border-radius:12px;
  color:#fff;
  font-weight:bold;
}

.timer{background:#4caf50}
.submit-top{background:#f44336;cursor:pointer}

.container{
  max-width:600px;
  margin:auto;
  padding:15px;
  padding-top:90px;
  padding-bottom:90px;
}

.question-wrapper{display:none}
.question-wrapper.active{display:block}

.nav-bottom{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  background:#fff;
  display:flex;
  gap:10px;
  padding:10px;
  box-shadow:0 -4px 10px rgba(0,0,0,.1);
}
.nav-bottom button{flex:1}
</style>
</head>

<body>

<!-- LOGIN PAGE -->
<div id="login-page">
  <div class="login-container">
    <h1>Latihan Reading Korea</h1>
    <p>40 Soal Pilihan Ganda | Waktu: 50 Menit</p>
    <h2>üîê Masuk ke Latihan</h2>
    <input id="username" placeholder="Username / Ïù¥Î¶Ñ">
    <input id="password" type="password" placeholder="Password / ÎπÑÎ∞ÄÎ≤àÌò∏">
    <input id="kode" placeholder="Kode Soal / ÏãúÌóòÏΩîÎìú">
    <button id="btnLogin">MULAI / ÏãúÏûë</button>
  </div>
</div>

<!-- QUIZ PAGE -->
<div id="quiz-page">
  <div class="header-fixed">
    <div class="submit-top" id="submitTop">SUBMIT</div>
    <div class="timer" id="timer">50:00</div>
  </div>

  <div class="container">
    <form id="quiz-form"></form>
  </div>

  <div class="nav-bottom">
    <button id="prev">PREV</button>
    <button id="next">NEXT</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  /* ====== ELEMENT ====== */
  const loginPage = document.getElementById("login-page");
  const quizPage  = document.getElementById("quiz-page");
  const btnLogin  = document.getElementById("btnLogin");
  const form      = document.getElementById("quiz-form");

  /* ====== LOGIN DATA ====== */
  const validCredentials = {
    "uus": "123",
    "kimjong2": "kimju456",
    "siswa01": "tryout26",
    "koreafan": "hanguk789",
    "topik2026": "seoul2026"
  };

  /* ====== KODE MAPPING (TIDAK DIUBAH) ====== */
  const kodeMapping = {
    "B12345": "soal1.json",
    "A09008": "soal2.json",
    "W11765": "soal3.json",
    "H66633": "soal4.json"
  };

  let questions = [];
  let current = 0;

  /* ====== LOGIN ====== */
  btnLogin.addEventListener("click", () => {
    const u = username.value.trim();
    const p = password.value.trim();
    const k = kode.value.trim().toUpperCase();

    if (validCredentials[u] && validCredentials[u] === p && kodeMapping[k]) {
      loginPage.style.display = "none";
      quizPage.style.display  = "block";
      loadSoal(kodeMapping[k]);
    } else {
      alert("Username, Password, atau Kode Soal salah bro!");
    }
  });

  /* ====== LOAD SOAL ====== */
  async function loadSoal(file){
    try{
      const res = await fetch(file + "?t=" + Date.now());
      questions = await res.json();
      render();
      show(0);
    }catch(e){
      alert("Gagal load file soal!");
      console.error(e);
    }
  }

  /* ====== RENDER ====== */
  function render(){
    form.innerHTML = "";
    questions.forEach((q,i)=>{
      const div = document.createElement("div");
      div.className = "question-wrapper";
      div.innerHTML = `
        ${q.audio ? `<audio controls src="${q.audio}" style="width:100%"></audio>` : ""}
        ${q.image ? `<img src="${q.image}" style="max-width:100%;margin-top:10px">` : ""}
        <p><strong>${q.question}</strong></p>
      `;
      form.appendChild(div);
    });
  }

  function show(n){
    document.querySelectorAll(".question-wrapper")
      .forEach((q,i)=>q.classList.toggle("active",i===n));
    current = n;
  }

  /* ====== NAV ====== */
  prev.onclick = ()=> current>0 && show(current-1);
  next.onclick = ()=> current<questions.length-1 && show(current+1);
  submitTop.onclick = ()=> alert("SUBMIT (dummy)");

});
</script>

</body>
</html>
